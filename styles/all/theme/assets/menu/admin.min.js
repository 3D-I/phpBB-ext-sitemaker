!function(e,n,t,i){"use strict";e(t).ready(function(){var i=n.ajaxUrl||"",a=n.menuId||0,o=n.lang||{},u=n.Twig||{},l={},r={},d={},s="";u.extendFunction("lang",function(e){return"undefined"!=typeof o[e]?o[e]:e});var c=function(){e(".icon-select").iconPicker({onSelect:function(e,n,t){var i=e.parentsUntil("li").parent().attr("id").substring("5");r.treeBuilder("updateItem",{item_icon:t},i)}})};e(t).ajaxSend(function(e,n,t){t.url+=t.url.indexOf("?")>=0?"&":"?",t.url+="menu_id="+a});var m=e("#sm-menus").on("click",".menu-option",function(n){a=+e(this).parent().attr("id").substring(5),e(this).parent().parent().children().removeClass("row3 current-menu"),e(this).parent().addClass("row3 current-menu"),r.treeBuilder("getItems"),n.preventDefault()}),p=e('<form id="inline-menu-form"><input type="text" id="inline-menu-edit" value="" /></form>').hide().appendTo(e("body"));r=e("#nested-tree").treeBuilder({ajaxUrl:i,editForm:"#edit-menu-item-form",dialogEdit:"#dialog-edit-menu-item",dialogConfirm:"#dialog-confirm-menu-item",loaded:function(){c()},updated:function(){c()}}),e(".toggle-view").click(function(n){e(e(this).attr("href")).slideToggle(),n.preventDefault()}),e("#add-menu").button().click(function(n){a=0,e.getJSON(i+"add_menu",function(e){if(null!==e.id){a=e.id;var n='<li id="menu-'+a+'" class="row3 current-menu">';n+='<a href="#" class="menu-option"><span class="menu-editable">'+e.title+"</span></a>",n+='<div class="menu-actions">',n+='<a href="#" class="menu-edit left" title="'+o.edit+'"><span class="ui-icon ui-icon-gear"></span></a>',n+='<a href="#" class="menu-delete left" title="'+o.remove+'"><span class="ui-icon ui-icon-trash"></span></a>',n+="</span></li>",m.children("li").removeClass("row3 current-menu"),m.append(n),r.show().treeBuilder("getItems")}}),n.preventDefault()}),e("#sm-menus").on("click",".menu-edit",function(n){var t=e(this).parent().prev().removeClass("menu-option").parent().removeClass("current-menu").find(".menu-editable");s=t.text(),p.show().appendTo(t.text("")).children(":input").val(s).focus().select().end(),n.preventDefault()}).on("click",".menu-delete",function(e){d.dialog({buttons:l}).dialog("open"),e.preventDefault()}),e("#inline-menu-form").submit(function(n){n.preventDefault(),e(this).children("#inline-menu-edit").trigger("blur")}),e("#inline-menu-edit").focusout(function(n){var t=e(this).val(),o=e(this).val("").parent().parent();a&&t&&t!==s?e.post(i+"edit_menu",{title:t},function(e){e.name&&o.text(e.name)}):t=s,p.hide().appendTo(e("body")),o.text(t).parent().addClass("menu-option").parent().addClass("current-menu"),n.preventDefault()}),l[o.remove]=function(){a&&e.getJSON(i+"delete_menu",function(t){if(t.id===a){var i=e("#menu-"+a),o=i.prev(),u=i.next();o.length?o.find(".menu-option").trigger("click"):u.length?u.find(".menu-option").trigger("click"):n.location.reload(!1),i.remove()}}),e(this).dialog("close")},l[o.cancel]=function(){e(this).dialog("close")},d=e("#dialog-confirm-menu").dialog({autoOpen:!1,modal:!0,width:"auto",show:"slide",hide:"slide"});var f=n.ace.edit("build_editor"),g=t.getElementById("add_list");g.style.display="none",f.setTheme("ace/theme/monokai"),f.getSession().setMode("ace/mode/html"),f.setDisplayIndentGuides(!0),f.getSession().setValue(g.value),f.getSession().on("change",function(){g.value=f.getSession().getValue()}),a&&r.show()})}(jQuery,window,document);
//# sourceMappingURL=../menu/admin.min.js.map